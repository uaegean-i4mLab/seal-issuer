{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunkMiddleware from \"redux-thunk\";\nimport axios from \"axios\";\nimport UserSelection from \"./model/userSelection\";\nconst initialState = {\n  count: 0,\n  qrData: null,\n  fetching: false,\n  requestSignature: null,\n  sessionData: null,\n  serverSessionId: null,\n  uuid: null,\n  vcSent: false,\n  userSelection: [],\n  // the attributes selected by the user to be included in a VC,\n  endpoint: null,\n  // the backend server url root.\n  cardIndex: 1,\n  stepperSteps: [],\n  baseUrl: \"\",\n  DID: false,\n  //boolean, denoting that DID connection response has been received for this session\n  sealSession: \"\",\n  didAuthCallback: \"\",\n  // callback address set by the caller to redirect to after DID auth,\n  eidasUri: \"\",\n  eidasPort: \"\",\n  eidasRedirectUri: \"\",\n  edugainUri: \"\",\n  edugainPort: \"\",\n  edugainRedirectUri: \"\",\n  vcFailed: false,\n  credQROffer: \"\"\n};\nexport const actionTypes = {\n  GET_QR_AUTH_RESPONSE: \"GET_QR_AUTH_RESPONSE\",\n  MAKE_QR_AUTH_REQUEST: \"MAKE_QR_AUTH_REQUEST\",\n  MAKE_VC_QR_REQUEST: \"MAKE_VC_QR_REQUEST\",\n  //make a request to generate a VC based on the selected attributes\n  GET_VC_QR_RESPONSE: \"GET_VC_QR_REQUEST\",\n  SET_ATTRIBUTES_SELECTION: \"SET_ATTRIBUTES_SELECTION\",\n  //adds an array as the user  selected attirubtes\n  ADD_SET_TO_ATTRIBUTES_SELECTION: \"ADD_SET_TO_ATTRIBUTES_SELECTION\",\n  //adds the payload to the userSelection\n  ADD_ATTRIBUTES_TO_SELECTION: \"ADD_ATTRIBUTES_TO_SELECTION\",\n  //adds the payload to the userSelection\n  // the selection takes place using identifiers from the session\n  // that are meaningful to the backend\n  REMOVE_ATTRIBUTE_FROM_SELECTION: \"REMOVE_ATTRIBUTE_FROM_SELECTION\",\n  SET_SERVER_SESSION_DATA: \"SET_SERVER_SESSION_DATA\",\n  SET_SERVER_SESSION_ID: \"SET_SERVER_SESSION_ID\",\n  VC_SENT_TO_USER: \"VC_SENT_TO_USER\",\n  SET_ENDPOINT: \"SET_END_POINT\",\n  //\n  INCREASE_CARD_INDEX: \"INCREASE_CARD_INDEX\",\n  DECREASE_CARD_INDEX: \"DECREASE_CARD_INDEX\",\n  //\n  SET_STEPPER_STEPS: \"SET_STEPPER_STEPS\",\n  //\n  SET_BASE_URL: \"SET_BASE_URL\",\n  //\n  SET_DID_TRUE: \"SES_DID_TRUE\",\n  SET_SEAL_SESSION: \"SET_SEAL_SESSION\",\n  SET_CALLBACK: \"SET_CALLBACK\",\n  SET_EIDAS_URI_PORT: \"SET_EIDAS_URI_PORT\",\n  SET_EIDAS_REDIRECT_URI: \"SET_EIDAS_REDIRECT_URI\",\n  SET_EDUGAIN_URI_PORT: \"SET_EDUGAIN_URI_PORT\",\n  SET_EDUGAIN_REDIRECT_URI: \"SET_EDUGAIN_REDIRECT_URI\",\n  VC_ISSUE_FAILED: \"VC_ISSUE_FAILED\",\n  JOLO_VC_GENERATED: \"JOLO_VC_GENERATED\"\n}; // REDUCERS\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.JOLO_VC_GENERATED:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        credQROffer: action.data\n      });\n\n    case actionTypes.VC_ISSUE_FAILED:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        vcFailed: true\n      });\n\n    case actionTypes.SET_EDUGAIN_REDIRECT_URI:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        edugainRedirectUri: action.data\n      });\n\n    case actionTypes.SET_EDUGAIN_URI_PORT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        edugainUri: action.data.uri,\n        edugainPort: action.data.port\n      });\n\n    case actionTypes.SET_EIDAS_REDIRECT_URI:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        eidasRedirectUri: action.data\n      });\n\n    case actionTypes.SET_EIDAS_URI_PORT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        eidasUri: action.data.uri,\n        eidasPort: action.data.port\n      });\n\n    case actionTypes.SET_CALLBACK:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        didAuthCallback: action.data\n      });\n\n    case actionTypes.SET_SEAL_SESSION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        sealSession: action.data\n      });\n\n    case actionTypes.SET_DID_TRUE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        DID: true,\n        uuid: action.data\n      });\n\n    case actionTypes.SET_BASE_URL:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        baseUrl: action.data\n      });\n\n    case actionTypes.SET_STEPPER_STEPS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        stepperSteps: action.data\n      });\n\n    case actionTypes.INCREASE_CARD_INDEX:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cardIndex: state.cardIndex + 1\n      });\n\n    case actionTypes.DECREASE_CARD_INDEX:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cardIndex: state.cardIndex - 1\n      });\n\n    case actionTypes.SET_ENDPOINT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        endpoint: action.data\n      });\n\n    case actionTypes.VC_SENT_TO_USER:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        vcSent: true\n      });\n\n    case actionTypes.SET_SERVER_SESSION_DATA:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        sessionData: action.data // userEduGain: action.data.eduGAIN,\n        // userEidas: action.data.eidas,\n\n      });\n\n    case actionTypes.GET_QR_AUTH_RESPONSE:\n      // console.log(action.data);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetching: false,\n        qrData: action.data.qr,\n        uuid: action.data.uuid,\n        requestSignature: action.data.signature\n      });\n\n    case actionTypes.SET_ATTRIBUTES_SELECTION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        userSelection: action.data\n      });\n\n    case actionTypes.MAKE_QR_AUTH_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetching: true,\n        vcSent: false\n      });\n\n    case actionTypes.ADD_ATTRIBUTES_TO_SELECTION:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          userSelection: [...state.userSelection, action.data]\n        });\n      }\n\n    case actionTypes.ADD_SET_TO_ATTRIBUTES_SELECTION:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          userSelection: [...state.userSelection, ...action.data]\n        });\n      }\n\n    case actionTypes.SET_SERVER_SESSION_ID:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          serverSessionId: action.data\n        });\n      }\n\n    case actionTypes.REMOVE_ATTRIBUTE_FROM_SELECTION:\n      let newSelection = [...state.userSelection.filter((el, ind) => {\n        return ind !== action.index;\n      })];\n      return _objectSpread(_objectSpread({}, state), {}, {\n        userSelection: newSelection\n      });\n\n    default:\n      return state;\n  }\n}; // ACTIONS\n\n\nexport function loginClicked() {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.MAKE_QR_AUTH_REQUEST\n    });\n    axios.get(\"connectionRequest\").then(data => {\n      console.log(\"got the data form the server\");\n      console.log(data.data);\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data\n      });\n    });\n  }; // return dispatch => axios.get('https://38da089e.ngrok.io/connectionRequest')\n  //     .then(({ data }) => data)\n  //     .then(items => dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST, items }))\n  //     .then( () =>{\n  //       console.log(\"got there\")\n  //         return dispatch({ type: actionTypes.GET_QR_AUTH_RESPONSE, data:'these are my awesome data' })\n  //     });\n} // export function setDIDTrue() {\n//   return dispatch => {\n//     dispatch({\n//       type: actionTypes.SET_DID_TRUE\n//     });\n//   };\n// }\n\nexport function setStepperSteps(steps) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_STEPPER_STEPS,\n      data: steps\n    });\n  };\n}\nexport function setBaseUrl(baseUrl) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_BASE_URL,\n      data: baseUrl\n    });\n  };\n}\nexport function startSession(sessionId, sessionStatus) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.START_SESSION,\n      data: {\n        sessionId: sessionId,\n        status: sessionStatus\n      }\n    });\n  };\n}\nexport function setServerSessionId(sessionId) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_SERVER_SESSION_ID,\n      data: sessionId\n    });\n  };\n}\nexport function setSessionData(sessionData) {\n  return dispatch => {\n    console.log(`setSessionData called with ${sessionData}`);\n    console.log(sessionData);\n    dispatch({\n      type: actionTypes.SET_SERVER_SESSION_DATA,\n      data: sessionData\n    });\n  };\n}\nexport function setUserAttributeSelection(selectedAttributes) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_ATTRIBUTES_SELECTION,\n      data: selectedAttributes\n    });\n  };\n}\nexport function updateSession(sessionStatus) {\n  return dispatch => {\n    let toDispatch = {\n      type: actionTypes.UPDATE_SESSION,\n      data: {\n        status: sessionStatus\n      }\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function setEndpoint(endpoint) {\n  return dispatch => {\n    let toDispatch = {\n      type: actionTypes.SET_ENDPOINT,\n      data: endpoint\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function addToSelection(index, source) {\n  // console.log(`store.js:: will add to seleciton ${index} , ${source}`);\n  const data = new UserSelection(index, source);\n  return dispatch => {\n    dispatch({\n      type: actionTypes.ADD_ATTRIBUTES_TO_SELECTION,\n      data: data\n    });\n  };\n}\nexport function addSetToSelection(setArray) {\n  const data = [];\n  setArray.forEach(attrObj => {\n    Object.keys(attrObj).map(key => {\n      // console.log(`will fetch key ${key} from` )\n      data.push(new UserSelection(key, attrObj.source));\n      return new UserSelection(key, attrObj[key]);\n    });\n  });\n  return dispatch => {\n    dispatch({\n      type: actionTypes.ADD_SET_TO_ATTRIBUTES_SELECTION,\n      data: data\n    });\n  };\n}\nexport function removeFromSelection(index) {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return dispatch => {\n    let toDispatch = {\n      type: actionTypes.REMOVE_ATTRIBUTE_FROM_SELECTION,\n      index: index\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function vcSentToUser() {\n  return dispatch => {\n    let toDispatch = {\n      type: actionTypes.VC_SENT_TO_USER\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function increaseCardIndex() {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return dispatch => {\n    let toDispatch = {\n      type: actionTypes.INCREASE_CARD_INDEX\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function decreaseCardIndex() {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return dispatch => {\n    let toDispatch = {\n      type: actionTypes.DECREASE_CARD_INDEX\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function requestVCgeneration(url, selectedAttributes, vcType, isMobile = false) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.MAKE_QR_AUTH_REQUEST\n    });\n    let bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n    console.log(\"store.js - requestVCgeneration:: will make VC generation request\");\n    console.log(`store.js - requestVCgeneration:: for the url ${url}`); // console.log(`store.js - requestVCgeneration:: with data`)\n    // console.log(selectedAttributes);\n    // console.log(isMobile);\n\n    axios.post(url, {\n      data: selectedAttributes,\n      vcType: vcType,\n      isMobile: isMobile\n    }).then(data => {\n      console.log(\"store.js- requestVCgeneration:: got the data form the server\");\n      console.log(data.data);\n      console.log(\"store.js- requestVCgeneration:: got vcType\");\n      console.log(vcType);\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data,\n        vcType: vcType\n      });\n    });\n  };\n}\nexport function makeConnectionRequest() {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.MAKE_QR_AUTH_REQUEST\n    });\n    axios.post(\"/makeConnectionRequest\", {}).then(data => {\n      console.log(\"store.js:: makeConnectionRequest got the data form the server\");\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data\n      });\n    });\n  };\n}\nexport function completeDIDAuth(uuid) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_DID_TRUE,\n      data: uuid\n    });\n  };\n}\nexport function makeAndPushVC(url, selectedAttributes, vcType, sealSession, isMobile = false) {\n  return dispatch => {\n    let bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n    console.log(\"store.js - makeAndPushVC:: will make VC generation request\");\n    console.log(`store.js :: makeandpushVC:: ${url}, and ${vcType}`);\n    axios.post(url, {\n      data: selectedAttributes,\n      sealSession: sealSession,\n      vcType: vcType,\n      isMobile: isMobile\n    }).then(data => {\n      console.log(\"store.js- makeAndPushVC:: got the data form the server\");\n      dispatch({\n        type: actionTypes.VC_SENT_TO_USER\n      });\n    }).catch(err => {\n      console.log(\"store.js- makeAndPushVC:: ERROR\");\n      console.log(err);\n      dispatch({\n        type: actionTypes.VC_ISSUE_FAILED\n      });\n    }); //TODO add here an action denoting that the VC was sent\n  };\n}\nexport function makeAndPushVCJolo(url, selectedAttributes, vcType, sealSession, isMobile = false) {\n  return dispatch => {\n    let bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n    axios.post(url, {\n      data: selectedAttributes,\n      sealSession: sealSession,\n      vcType: vcType,\n      isMobile: isMobile\n    }).then(resp => {\n      dispatch({\n        type: actionTypes.JOLO_VC_GENERATED,\n        resp: data.qr\n      });\n    }).catch(err => {\n      console.log(\"store.js- makeAndPushVC:: ERROR\");\n      console.log(err);\n      dispatch({\n        type: actionTypes.VC_ISSUE_FAILED\n      });\n    });\n  };\n}\nexport function setSealSession(sessionId) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_SEAL_SESSION,\n      data: sessionId\n    });\n  };\n}\nexport function makeSealSession(baseUrl) {\n  console.log(\"store:: makeSealSession\");\n  return dispatch => {\n    axios.post(`${baseUrl}seal/start-session`, {}).then(resp => {\n      console.log(\"store.js:: makeSealSession\"); // console.log(resp.data);\n\n      return dispatch({\n        type: actionTypes.SET_SEAL_SESSION,\n        data: resp.data\n      });\n    });\n  };\n}\nexport function makeOnlyConnectionRequest(sealSession, baseUrl, vcType = \"didAuth\", isMobile) {\n  let postData = {\n    sealSession: sealSession,\n    vcType: vcType\n  };\n\n  if (isMobile) {\n    postData.isMobile = isMobile;\n  }\n\n  return dispatch => {\n    dispatch({\n      type: actionTypes.MAKE_QR_AUTH_REQUEST\n    });\n    axios.post(`${baseUrl}onlyConnectionRequest`, postData).then(data => {\n      console.log(\"store.js -- onlyConnectionRequest:: got the data form the server\");\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data\n      });\n    });\n  };\n}\nexport function makeSealSessionWithDIDConnecetionRequest(baseUrl, vcType, isMobile) {\n  console.log(`store:: makeSealSessionWithDIDConnecetionRequest  the base url is--${baseUrl}--`);\n  return dispatch => {\n    let sessionId = \"\";\n    axios.post(`${baseUrl}seal/start-session`, {}).then(resp => {\n      console.log(\"store.js:: makeSealSessionWithDIDConnecetionRequest -- start-session\");\n      sessionId = resp.data;\n      return dispatch({\n        type: actionTypes.SET_SEAL_SESSION,\n        data: resp.data\n      });\n    }).then(obj => {\n      console.log(\"makeSealSessionWithDIDConnecetionRequest\");\n      console.log(`isMobile? ${isMobile}`);\n      axios.post(`${baseUrl}onlyConnectionRequest`, {\n        sealSession: sessionId,\n        baseUrl: baseUrl,\n        vcType: vcType,\n        isMobile: isMobile\n      }).then(data => {\n        return dispatch({\n          type: actionTypes.GET_QR_AUTH_RESPONSE,\n          data: data.data\n        });\n      });\n    });\n  };\n}\nexport function setDidCallback(callback) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_CALLBACK,\n      data: callback\n    });\n  };\n}\nexport function setEidasUriPort(uri, port) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_EIDAS_URI_PORT,\n      data: {\n        uri: uri,\n        port: port\n      }\n    });\n  };\n}\nexport function setEidasRedirectUri(uri) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_EIDAS_REDIRECT_URI,\n      data: uri\n    });\n  };\n}\nexport function setEdugainRedirectUri(uri) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_EDUGAIN_REDIRECT_URI,\n      data: uri\n    });\n  };\n}\nexport function setEdugainUriPort(uri, port) {\n  return dispatch => {\n    dispatch({\n      type: actionTypes.SET_EDUGAIN_URI_PORT,\n      data: {\n        uri: uri,\n        port: port\n      }\n    });\n  };\n}\nexport const initializeStore = (preloadedState = initialState) => {\n  return createStore(reducer, preloadedState, composeWithDevTools(applyMiddleware(thunkMiddleware)));\n};","map":{"version":3,"sources":["/home/ni/code/js/jolocom-seal-issuer/store.js"],"names":["createStore","applyMiddleware","composeWithDevTools","thunkMiddleware","axios","UserSelection","initialState","count","qrData","fetching","requestSignature","sessionData","serverSessionId","uuid","vcSent","userSelection","endpoint","cardIndex","stepperSteps","baseUrl","DID","sealSession","didAuthCallback","eidasUri","eidasPort","eidasRedirectUri","edugainUri","edugainPort","edugainRedirectUri","vcFailed","credQROffer","actionTypes","GET_QR_AUTH_RESPONSE","MAKE_QR_AUTH_REQUEST","MAKE_VC_QR_REQUEST","GET_VC_QR_RESPONSE","SET_ATTRIBUTES_SELECTION","ADD_SET_TO_ATTRIBUTES_SELECTION","ADD_ATTRIBUTES_TO_SELECTION","REMOVE_ATTRIBUTE_FROM_SELECTION","SET_SERVER_SESSION_DATA","SET_SERVER_SESSION_ID","VC_SENT_TO_USER","SET_ENDPOINT","INCREASE_CARD_INDEX","DECREASE_CARD_INDEX","SET_STEPPER_STEPS","SET_BASE_URL","SET_DID_TRUE","SET_SEAL_SESSION","SET_CALLBACK","SET_EIDAS_URI_PORT","SET_EIDAS_REDIRECT_URI","SET_EDUGAIN_URI_PORT","SET_EDUGAIN_REDIRECT_URI","VC_ISSUE_FAILED","JOLO_VC_GENERATED","reducer","state","action","type","data","uri","port","qr","signature","newSelection","filter","el","ind","index","loginClicked","dispatch","get","then","console","log","setStepperSteps","steps","setBaseUrl","startSession","sessionId","sessionStatus","START_SESSION","status","setServerSessionId","setSessionData","setUserAttributeSelection","selectedAttributes","updateSession","toDispatch","UPDATE_SESSION","setEndpoint","addToSelection","source","addSetToSelection","setArray","forEach","attrObj","Object","keys","map","key","push","removeFromSelection","vcSentToUser","increaseCardIndex","decreaseCardIndex","requestVCgeneration","url","vcType","isMobile","bodyFormData","FormData","set","post","makeConnectionRequest","completeDIDAuth","makeAndPushVC","catch","err","makeAndPushVCJolo","resp","setSealSession","makeSealSession","makeOnlyConnectionRequest","postData","makeSealSessionWithDIDConnecetionRequest","obj","setDidCallback","callback","setEidasUriPort","setEidasRedirectUri","setEdugainRedirectUri","setEdugainUriPort","initializeStore","preloadedState"],"mappings":"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","sourcesContent":["import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunkMiddleware from \"redux-thunk\";\nimport axios from \"axios\";\nimport UserSelection from \"./model/userSelection\";\n\nconst initialState = {\n  count: 0,\n  qrData: null,\n  fetching: false,\n  requestSignature: null,\n  sessionData: null,\n  serverSessionId: null,\n  uuid: null,\n  vcSent: false,\n  userSelection: [], // the attributes selected by the user to be included in a VC,\n  endpoint: null, // the backend server url root.\n  cardIndex: 1,\n  stepperSteps: [],\n  baseUrl: \"\",\n  DID: false, //boolean, denoting that DID connection response has been received for this session\n  sealSession: \"\",\n  didAuthCallback: \"\", // callback address set by the caller to redirect to after DID auth,\n  eidasUri: \"\",\n  eidasPort: \"\",\n  eidasRedirectUri: \"\",\n\n  edugainUri: \"\",\n  edugainPort: \"\",\n  edugainRedirectUri: \"\",\n  vcFailed: false,\n  credQROffer: \"\",\n};\n\nexport const actionTypes = {\n  GET_QR_AUTH_RESPONSE: \"GET_QR_AUTH_RESPONSE\",\n  MAKE_QR_AUTH_REQUEST: \"MAKE_QR_AUTH_REQUEST\",\n\n  MAKE_VC_QR_REQUEST: \"MAKE_VC_QR_REQUEST\", //make a request to generate a VC based on the selected attributes\n  GET_VC_QR_RESPONSE: \"GET_VC_QR_REQUEST\",\n\n  SET_ATTRIBUTES_SELECTION: \"SET_ATTRIBUTES_SELECTION\", //adds an array as the user  selected attirubtes\n  ADD_SET_TO_ATTRIBUTES_SELECTION: \"ADD_SET_TO_ATTRIBUTES_SELECTION\", //adds the payload to the userSelection\n  ADD_ATTRIBUTES_TO_SELECTION: \"ADD_ATTRIBUTES_TO_SELECTION\", //adds the payload to the userSelection\n  // the selection takes place using identifiers from the session\n  // that are meaningful to the backend\n  REMOVE_ATTRIBUTE_FROM_SELECTION: \"REMOVE_ATTRIBUTE_FROM_SELECTION\",\n\n  SET_SERVER_SESSION_DATA: \"SET_SERVER_SESSION_DATA\",\n  SET_SERVER_SESSION_ID: \"SET_SERVER_SESSION_ID\",\n  VC_SENT_TO_USER: \"VC_SENT_TO_USER\",\n  SET_ENDPOINT: \"SET_END_POINT\",\n\n  //\n  INCREASE_CARD_INDEX: \"INCREASE_CARD_INDEX\",\n  DECREASE_CARD_INDEX: \"DECREASE_CARD_INDEX\",\n  //\n  SET_STEPPER_STEPS: \"SET_STEPPER_STEPS\",\n  //\n  SET_BASE_URL: \"SET_BASE_URL\",\n\n  //\n  SET_DID_TRUE: \"SES_DID_TRUE\",\n\n  SET_SEAL_SESSION: \"SET_SEAL_SESSION\",\n\n  SET_CALLBACK: \"SET_CALLBACK\",\n  SET_EIDAS_URI_PORT: \"SET_EIDAS_URI_PORT\",\n  SET_EIDAS_REDIRECT_URI: \"SET_EIDAS_REDIRECT_URI\",\n\n  SET_EDUGAIN_URI_PORT: \"SET_EDUGAIN_URI_PORT\",\n  SET_EDUGAIN_REDIRECT_URI: \"SET_EDUGAIN_REDIRECT_URI\",\n\n  VC_ISSUE_FAILED: \"VC_ISSUE_FAILED\",\n\n  JOLO_VC_GENERATED: \"JOLO_VC_GENERATED\",\n};\n\n// REDUCERS\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n\n    case actionTypes.JOLO_VC_GENERATED:\n      return {...state, credQROffer: action.data}\n\n    case actionTypes.VC_ISSUE_FAILED:\n      return {...state, vcFailed: true}\n      \n    case actionTypes.SET_EDUGAIN_REDIRECT_URI:\n      return {\n        ...state,\n        edugainRedirectUri: action.data,\n      };\n\n    case actionTypes.SET_EDUGAIN_URI_PORT:\n      return {\n        ...state,\n        edugainUri: action.data.uri,\n        edugainPort: action.data.port,\n      };\n\n    case actionTypes.SET_EIDAS_REDIRECT_URI:\n      return {\n        ...state,\n        eidasRedirectUri: action.data,\n      };\n\n    case actionTypes.SET_EIDAS_URI_PORT:\n      return {\n        ...state,\n        eidasUri: action.data.uri,\n        eidasPort: action.data.port,\n      };\n\n    case actionTypes.SET_CALLBACK:\n      return {\n        ...state,\n        didAuthCallback: action.data,\n      };\n\n    case actionTypes.SET_SEAL_SESSION:\n      return {\n        ...state,\n        sealSession: action.data,\n      };\n\n    case actionTypes.SET_DID_TRUE:\n      return {\n        ...state,\n        DID: true,\n        uuid: action.data,\n      };\n\n    case actionTypes.SET_BASE_URL:\n      return {\n        ...state,\n        baseUrl: action.data,\n      };\n\n    case actionTypes.SET_STEPPER_STEPS:\n      return {\n        ...state,\n        stepperSteps: action.data,\n      };\n\n    case actionTypes.INCREASE_CARD_INDEX:\n      return {\n        ...state,\n        cardIndex: state.cardIndex + 1,\n      };\n\n    case actionTypes.DECREASE_CARD_INDEX:\n      return {\n        ...state,\n        cardIndex: state.cardIndex - 1,\n      };\n\n    case actionTypes.SET_ENDPOINT:\n      return {\n        ...state,\n        endpoint: action.data,\n      };\n    case actionTypes.VC_SENT_TO_USER:\n      return {\n        ...state,\n        vcSent: true,\n      };\n    case actionTypes.SET_SERVER_SESSION_DATA:\n      return {\n        ...state,\n        sessionData: action.data,\n        // userEduGain: action.data.eduGAIN,\n        // userEidas: action.data.eidas,\n      };\n    case actionTypes.GET_QR_AUTH_RESPONSE:\n      // console.log(action.data);\n      return {\n        ...state,\n        fetching: false,\n        qrData: action.data.qr,\n        uuid: action.data.uuid,\n        requestSignature: action.data.signature,\n      };\n\n    case actionTypes.SET_ATTRIBUTES_SELECTION:\n      return {\n        ...state,\n        userSelection: action.data,\n      };\n\n    case actionTypes.MAKE_QR_AUTH_REQUEST:\n      return {\n        ...state,\n        fetching: true,\n        vcSent: false,\n      };\n\n    case actionTypes.ADD_ATTRIBUTES_TO_SELECTION: {\n      return {\n        ...state,\n        userSelection: [...state.userSelection, action.data],\n      };\n    }\n\n    case actionTypes.ADD_SET_TO_ATTRIBUTES_SELECTION: {\n      return {\n        ...state,\n        userSelection: [...state.userSelection, ...action.data],\n      };\n    }\n\n    case actionTypes.SET_SERVER_SESSION_ID: {\n      return {\n        ...state,\n        serverSessionId: action.data,\n      };\n    }\n\n    case actionTypes.REMOVE_ATTRIBUTE_FROM_SELECTION:\n      let newSelection = [\n        ...state.userSelection.filter((el, ind) => {\n          return ind !== action.index;\n        }),\n      ];\n      return {\n        ...state,\n        userSelection: newSelection,\n      };\n\n    default:\n      return state;\n  }\n};\n\n// ACTIONS\n\nexport function loginClicked() {\n  return (dispatch) => {\n    dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST });\n    axios.get(\"connectionRequest\").then((data) => {\n      console.log(\"got the data form the server\");\n      console.log(data.data);\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data,\n      });\n    });\n  };\n  // return dispatch => axios.get('https://38da089e.ngrok.io/connectionRequest')\n  //     .then(({ data }) => data)\n  //     .then(items => dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST, items }))\n  //     .then( () =>{\n  //       console.log(\"got there\")\n  //         return dispatch({ type: actionTypes.GET_QR_AUTH_RESPONSE, data:'these are my awesome data' })\n  //     });\n}\n\n// export function setDIDTrue() {\n//   return dispatch => {\n//     dispatch({\n//       type: actionTypes.SET_DID_TRUE\n//     });\n//   };\n// }\n\nexport function setStepperSteps(steps) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_STEPPER_STEPS,\n      data: steps,\n    });\n  };\n}\n\nexport function setBaseUrl(baseUrl) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_BASE_URL,\n      data: baseUrl,\n    });\n  };\n}\n\nexport function startSession(sessionId, sessionStatus) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.START_SESSION,\n      data: { sessionId: sessionId, status: sessionStatus },\n    });\n  };\n}\n\nexport function setServerSessionId(sessionId) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_SERVER_SESSION_ID,\n      data: sessionId,\n    });\n  };\n}\n\nexport function setSessionData(sessionData) {\n  return (dispatch) => {\n    console.log(`setSessionData called with ${sessionData}`);\n    console.log(sessionData)\n    dispatch({\n      type: actionTypes.SET_SERVER_SESSION_DATA,\n      data: sessionData,\n    });\n  };\n}\n\nexport function setUserAttributeSelection(selectedAttributes) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_ATTRIBUTES_SELECTION,\n      data: selectedAttributes,\n    });\n  };\n}\n\nexport function updateSession(sessionStatus) {\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.UPDATE_SESSION,\n      data: { status: sessionStatus },\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function setEndpoint(endpoint) {\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.SET_ENDPOINT,\n      data: endpoint,\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function addToSelection(index, source) {\n  // console.log(`store.js:: will add to seleciton ${index} , ${source}`);\n  const data = new UserSelection(index, source);\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.ADD_ATTRIBUTES_TO_SELECTION,\n      data: data,\n    });\n  };\n}\n\nexport function addSetToSelection(setArray) {\n  const data = [];\n  setArray.forEach((attrObj) => {\n    Object.keys(attrObj).map((key) => {\n      // console.log(`will fetch key ${key} from` )\n      data.push(new UserSelection(key, attrObj.source));\n      return new UserSelection(key, attrObj[key]);\n    });\n  });\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.ADD_SET_TO_ATTRIBUTES_SELECTION,\n      data: data,\n    });\n  };\n}\n\nexport function removeFromSelection(index) {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.REMOVE_ATTRIBUTE_FROM_SELECTION,\n      index: index,\n    };\n\n    dispatch(toDispatch);\n  };\n}\n\nexport function vcSentToUser() {\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.VC_SENT_TO_USER,\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function increaseCardIndex() {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.INCREASE_CARD_INDEX,\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function decreaseCardIndex() {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.DECREASE_CARD_INDEX,\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function requestVCgeneration(\n  url,\n  selectedAttributes,\n  vcType,\n  isMobile = false\n) {\n  return (dispatch) => {\n    dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST });\n\n    let bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n\n    console.log(\n      \"store.js - requestVCgeneration:: will make VC generation request\"\n    );\n    console.log(`store.js - requestVCgeneration:: for the url ${url}`);\n    // console.log(`store.js - requestVCgeneration:: with data`)\n    // console.log(selectedAttributes);\n    // console.log(isMobile);\n    axios\n      .post(url, {\n        data: selectedAttributes,\n        vcType: vcType,\n        isMobile: isMobile,\n      })\n      .then((data) => {\n        console.log(\n          \"store.js- requestVCgeneration:: got the data form the server\"\n        );\n        console.log(data.data);\n\n        console.log(\"store.js- requestVCgeneration:: got vcType\");\n        console.log(vcType);\n\n        return dispatch({\n          type: actionTypes.GET_QR_AUTH_RESPONSE,\n          data: data.data,\n          vcType: vcType,\n        });\n      });\n  };\n}\n\nexport function makeConnectionRequest() {\n  return (dispatch) => {\n    dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST });\n    axios.post(\"/makeConnectionRequest\", {}).then((data) => {\n      console.log(\n        \"store.js:: makeConnectionRequest got the data form the server\"\n      );\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data,\n      });\n    });\n  };\n}\n\nexport function completeDIDAuth(uuid) {\n  return (dispatch) => {\n    dispatch({ type: actionTypes.SET_DID_TRUE, data: uuid });\n  };\n}\n\nexport function makeAndPushVC(\n  url,\n  selectedAttributes,\n  vcType,\n  sealSession,\n  isMobile = false\n) {\n  return (dispatch) => {\n    let bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n    console.log(\"store.js - makeAndPushVC:: will make VC generation request\");\n\n    console.log(`store.js :: makeandpushVC:: ${url}, and ${vcType}`);\n    axios\n      .post(url, {\n        data: selectedAttributes,\n        sealSession: sealSession,\n        vcType: vcType,\n        isMobile: isMobile,\n      })\n      .then((data) => {\n        console.log(\"store.js- makeAndPushVC:: got the data form the server\");\n        dispatch({ type: actionTypes.VC_SENT_TO_USER });\n      })\n      .catch((err) => {\n        console.log(\"store.js- makeAndPushVC:: ERROR\");\n        console.log(err);\n        dispatch({ type: actionTypes.VC_ISSUE_FAILED });\n      });\n    //TODO add here an action denoting that the VC was sent\n  };\n}\n\n\nexport function makeAndPushVCJolo(\n  url,\n  selectedAttributes,\n  vcType,\n  sealSession,\n  isMobile = false\n) {\n  return (dispatch) => {\n    let bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n    \n    axios\n      .post(url, {\n        data: selectedAttributes,\n        sealSession: sealSession,\n        vcType: vcType,\n        isMobile: isMobile,\n      })\n      .then((resp) => {\n        dispatch({ type: actionTypes.JOLO_VC_GENERATED, resp: data.qr });\n      })\n      .catch((err) => {\n        console.log(\"store.js- makeAndPushVC:: ERROR\");\n        console.log(err);\n        dispatch({ type: actionTypes.VC_ISSUE_FAILED });\n      });\n  };\n}\n\n\n\nexport function setSealSession(sessionId) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_SEAL_SESSION,\n      data: sessionId,\n    });\n  };\n}\n\nexport function makeSealSession(baseUrl) {\n  console.log(\"store:: makeSealSession\");\n  return (dispatch) => {\n    axios.post(`${baseUrl}seal/start-session`, {}).then((resp) => {\n      console.log(\"store.js:: makeSealSession\");\n      // console.log(resp.data);\n      return dispatch({\n        type: actionTypes.SET_SEAL_SESSION,\n        data: resp.data,\n      });\n    });\n  };\n}\n\nexport function makeOnlyConnectionRequest(\n  sealSession,\n  baseUrl,\n  vcType =\"didAuth\",\n  isMobile\n) {\n  let postData = {\n    sealSession: sealSession,\n    vcType: vcType,\n  };\n\n  if (isMobile) {\n    postData.isMobile = isMobile;\n  }\n  return (dispatch) => {\n    dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST });\n    axios.post(`${baseUrl}onlyConnectionRequest`, postData).then((data) => {\n      console.log(\n        \"store.js -- onlyConnectionRequest:: got the data form the server\"\n      );\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data,\n      });\n    });\n  };\n}\n\nexport function makeSealSessionWithDIDConnecetionRequest(\n  baseUrl,\n  vcType,\n  isMobile\n) {\n  console.log(\n    `store:: makeSealSessionWithDIDConnecetionRequest  the base url is--${baseUrl}--`\n  );\n  return (dispatch) => {\n    let sessionId = \"\";\n    axios\n      .post(`${baseUrl}seal/start-session`, {})\n      .then((resp) => {\n        console.log(\n          \"store.js:: makeSealSessionWithDIDConnecetionRequest -- start-session\"\n        );\n        sessionId = resp.data;\n        return dispatch({\n          type: actionTypes.SET_SEAL_SESSION,\n          data: resp.data,\n        });\n      })\n      .then((obj) => {\n        console.log(\"makeSealSessionWithDIDConnecetionRequest\")\n        console.log(`isMobile? ${isMobile}`);\n\n        axios\n          .post(`${baseUrl}onlyConnectionRequest`, {\n            sealSession: sessionId,\n            baseUrl: baseUrl,\n            vcType: vcType,\n            isMobile: isMobile,\n          })\n          .then((data) => {\n            return dispatch({\n              type: actionTypes.GET_QR_AUTH_RESPONSE,\n              data: data.data,\n            });\n          });\n      });\n  };\n}\n\nexport function setDidCallback(callback) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_CALLBACK,\n      data: callback,\n    });\n  };\n}\n\nexport function setEidasUriPort(uri, port) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_EIDAS_URI_PORT,\n      data: { uri: uri, port: port },\n    });\n  };\n}\n\nexport function setEidasRedirectUri(uri) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_EIDAS_REDIRECT_URI,\n      data: uri,\n    });\n  };\n}\n\nexport function setEdugainRedirectUri(uri) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_EDUGAIN_REDIRECT_URI,\n      data: uri,\n    });\n  };\n}\n\n\nexport function setEdugainUriPort(uri, port) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_EDUGAIN_URI_PORT,\n      data: { uri: uri, port: port },\n    });\n  };\n}\n\nexport const initializeStore = (preloadedState = initialState) => {\n  return createStore(\n    reducer,\n    preloadedState,\n    composeWithDevTools(applyMiddleware(thunkMiddleware))\n  );\n};\n"]},"metadata":{},"sourceType":"module"}